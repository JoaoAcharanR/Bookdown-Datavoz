<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 6 Construcción de ponderadores por Raking | Bookdown D&amp;A</title>
  <meta name="description" content=" 6 Construcción de ponderadores por Raking | Bookdown D&amp;A" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content=" 6 Construcción de ponderadores por Raking | Bookdown D&amp;A" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 6 Construcción de ponderadores por Raking | Bookdown D&amp;A" />
  
  
  

<meta name="author" content="Jonatan Salazar" />


<meta name="date" content="2022-06-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="malla-de-validación.html"/>
<link rel="next" href="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.21/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Bookdown Datavoz</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introducción</a></li>
<li class="chapter" data-level="2" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html"><i class="fa fa-check"></i><b>2</b> Procesamiento de Base de Datos</a>
<ul>
<li class="chapter" data-level="2.1" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#operadores-de-utilidad-general"><i class="fa fa-check"></i><b>2.1</b> Operadores de utilidad general</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#operadores-relacionales"><i class="fa fa-check"></i><b>2.1.1</b> <strong>1. Operadores relacionales</strong></a></li>
<li class="chapter" data-level="2.1.2" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#operadores-aritméticos"><i class="fa fa-check"></i><b>2.1.2</b> <strong>2. Operadores aritméticos</strong></a></li>
<li class="chapter" data-level="2.1.3" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#operadores-de-asignación"><i class="fa fa-check"></i><b>2.1.3</b> <strong>3. Operadores de asignación</strong></a></li>
<li class="chapter" data-level="2.1.4" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#operadores-booleanos"><i class="fa fa-check"></i><b>2.1.4</b> <strong>4. Operadores booleanos</strong></a></li>
<li class="chapter" data-level="2.1.5" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#operador-pipeline"><i class="fa fa-check"></i><b>2.1.5</b> <strong>5. Operador pipeline (%&gt;%)</strong></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#manipulación-de-estructutura-de-bases-de-datos"><i class="fa fa-check"></i><b>2.2</b> Manipulación de estructutura de bases de datos</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#tipos-de-variables"><i class="fa fa-check"></i><b>2.2.1</b> Tipos de variables</a></li>
<li class="chapter" data-level="2.2.2" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#coerción-explícita"><i class="fa fa-check"></i><b>2.2.2</b> Coerción explícita</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#crear-nuevas-variables"><i class="fa fa-check"></i><b>2.3</b> Crear nuevas variables</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#r-base"><i class="fa fa-check"></i><b>2.3.1</b> <strong>1. R Base</strong></a></li>
<li class="chapter" data-level="2.3.2" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#tidyverse"><i class="fa fa-check"></i><b>2.3.2</b> <strong>2. Tidyverse</strong></a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#limpiar-y-renombrar-variables"><i class="fa fa-check"></i><b>2.4</b> Limpiar y renombrar variables</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#limpiar-nombre-de-variables-librería-janitor"><i class="fa fa-check"></i><b>2.4.1</b> <strong>1. Limpiar nombre de variables, librería “janitor”</strong></a></li>
<li class="chapter" data-level="2.4.2" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#renombrar-variables"><i class="fa fa-check"></i><b>2.4.2</b> <strong>2. Renombrar variables</strong></a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#reordenar-variables"><i class="fa fa-check"></i><b>2.5</b> Reordenar variables</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#r-base-2"><i class="fa fa-check"></i><b>2.5.1</b> <strong>1. R base</strong></a></li>
<li class="chapter" data-level="2.5.2" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#tidyverse-2"><i class="fa fa-check"></i><b>2.5.2</b> <strong>2. Tidyverse</strong></a></li>
<li class="chapter" data-level="2.5.3" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#función-personalizada"><i class="fa fa-check"></i><b>2.5.3</b> <strong>3. Función personalizada</strong></a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#recodificación-de-variables"><i class="fa fa-check"></i><b>2.6</b> Recodificación de variables</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#r-base-3"><i class="fa fa-check"></i><b>2.6.1</b> <strong>1. R base</strong></a></li>
<li class="chapter" data-level="2.6.2" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#tidyverse-3"><i class="fa fa-check"></i><b>2.6.2</b> <strong>2. Tidyverse</strong></a></li>
<li class="chapter" data-level="2.6.3" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#car"><i class="fa fa-check"></i><b>2.6.3</b> <strong>3. Car</strong></a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#selección-de-variables"><i class="fa fa-check"></i><b>2.7</b> Selección de variables</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#r-base-4"><i class="fa fa-check"></i><b>2.7.1</b> <strong>R Base</strong></a></li>
<li class="chapter" data-level="2.7.2" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#tidyverse-4"><i class="fa fa-check"></i><b>2.7.2</b> <strong>Tidyverse</strong></a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#filtrar-casos"><i class="fa fa-check"></i><b>2.8</b> Filtrar casos</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#tidyverse-5"><i class="fa fa-check"></i><b>2.8.1</b> <strong>Tidyverse</strong></a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#bases-de-datos-long-y-wide"><i class="fa fa-check"></i><b>2.9</b> Bases de datos Long y Wide</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#de-long-a-wider"><i class="fa fa-check"></i><b>2.9.1</b> <strong>1. De long a wider</strong></a></li>
<li class="chapter" data-level="2.9.2" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#de-wider-a-long"><i class="fa fa-check"></i><b>2.9.2</b> <strong>2. De wider a long</strong></a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="procesamiento-de-base-de-datos.html"><a href="procesamiento-de-base-de-datos.html#colapsar-variables"><i class="fa fa-check"></i><b>2.10</b> Colapsar variables</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html"><a href="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html"><i class="fa fa-check"></i><b>3</b> Automatización de tabulaciones de variables (de frecuencia, contingencia y diferencia de medias)</a>
<ul>
<li class="chapter" data-level="3.1" data-path="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html"><a href="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html#tablas-de-frecuenciacontingencia"><i class="fa fa-check"></i><b>3.1</b> Tablas de frecuencia/contingencia</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html"><a href="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html#cargar-nuestra-bbdd"><i class="fa fa-check"></i><b>3.1.1</b> <strong>1. Cargar nuestra BBDD</strong></a></li>
<li class="chapter" data-level="3.1.2" data-path="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html"><a href="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html#creamos-un-banner"><i class="fa fa-check"></i><b>3.1.2</b> <strong>2. Creamos un banner</strong></a></li>
<li class="chapter" data-level="3.1.3" data-path="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html"><a href="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html#una-vez-creamos-nuestro-objeto-banner-debemos-crear-una-función-capaz-de-crear-las-diferencias-proporcionales"><i class="fa fa-check"></i><b>3.1.3</b> <strong>3. Una vez creamos nuestro objeto banner, debemos crear una función capaz de crear las diferencias proporcionales</strong></a></li>
<li class="chapter" data-level="3.1.4" data-path="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html"><a href="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html#creación-de-secciones-recomendado"><i class="fa fa-check"></i><b>3.1.4</b> <strong>4. Creación de secciones (Recomendado)</strong></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html"><a href="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html#tablas-de-diferencias-de-medias"><i class="fa fa-check"></i><b>3.2</b> Tablas de diferencias de medias</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html"><a href="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html#creamos-un-banner-1"><i class="fa fa-check"></i><b>3.2.1</b> <strong>1. Creamos un banner</strong></a></li>
<li class="chapter" data-level="3.2.2" data-path="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html"><a href="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html#creamos-una-función-que-nos-permita-calcular-las-diferencias-de-medias"><i class="fa fa-check"></i><b>3.2.2</b> <strong>2. Creamos una función que nos permita calcular las diferencias de medias</strong></a></li>
<li class="chapter" data-level="3.2.3" data-path="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html"><a href="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html#creación-de-secciones-recomendado-1"><i class="fa fa-check"></i><b>3.2.3</b> <strong>3. Creación de secciones (Recomendado)</strong></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html"><a href="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html#exportar-tablas-a-excel"><i class="fa fa-check"></i><b>3.3</b> Exportar tablas a excel</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html"><a href="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html#independientes-porcentajes"><i class="fa fa-check"></i><b>3.3.1</b> 1. Independientes: porcentajes</a></li>
<li class="chapter" data-level="3.3.2" data-path="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html"><a href="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html#independientes-diferencia-de-medias"><i class="fa fa-check"></i><b>3.3.2</b> 2. Independientes: diferencia de medias</a></li>
<li class="chapter" data-level="3.3.3" data-path="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html"><a href="automatización-de-tabulaciones-de-variables-de-frecuencia-contingencia-y-diferencia-de-medias.html#en-conjunto-porcentaje-y-dif-de-medias-en-un-solo-archivo"><i class="fa fa-check"></i><b>3.3.3</b> 3. En conjunto: porcentaje y dif de medias en un solo archivo</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="clasificación-por-nivel-socio-económico-metodología-aim.html"><a href="clasificación-por-nivel-socio-económico-metodología-aim.html"><i class="fa fa-check"></i><b>4</b> Clasificación por nivel socio-económico (Metodología AIM)</a>
<ul>
<li class="chapter" data-level="4.1" data-path="clasificación-por-nivel-socio-económico-metodología-aim.html"><a href="clasificación-por-nivel-socio-económico-metodología-aim.html#construcción-con-ingreso"><i class="fa fa-check"></i><b>4.1</b> Construcción con ingreso</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="clasificación-por-nivel-socio-económico-metodología-aim.html"><a href="clasificación-por-nivel-socio-económico-metodología-aim.html#a.-cargar-nuestros-datos"><i class="fa fa-check"></i><b>4.1.1</b> <strong>a. cargar nuestros datos</strong></a></li>
<li class="chapter" data-level="4.1.2" data-path="clasificación-por-nivel-socio-económico-metodología-aim.html"><a href="clasificación-por-nivel-socio-económico-metodología-aim.html#b.-recodificar-nuestras-variables"><i class="fa fa-check"></i><b>4.1.2</b> <strong>b. recodificar nuestras variables</strong></a></li>
<li class="chapter" data-level="4.1.3" data-path="clasificación-por-nivel-socio-económico-metodología-aim.html"><a href="clasificación-por-nivel-socio-económico-metodología-aim.html#c.-integrar-la-variable-gse-y-generar-recodificación"><i class="fa fa-check"></i><b>4.1.3</b> <strong>c. integrar la variable gse y generar recodificación</strong></a></li>
<li class="chapter" data-level="4.1.4" data-path="clasificación-por-nivel-socio-económico-metodología-aim.html"><a href="clasificación-por-nivel-socio-económico-metodología-aim.html#d-exportar-bbdd-con-clasificación-socioeconómica"><i class="fa fa-check"></i><b>4.1.4</b> **d) exportar BBDD con clasificación socioeconómica</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="clasificación-por-nivel-socio-económico-metodología-aim.html"><a href="clasificación-por-nivel-socio-económico-metodología-aim.html#construcción-sin-ingreso-proxy"><i class="fa fa-check"></i><b>4.2</b> Construcción sin ingreso (proxy)</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="clasificación-por-nivel-socio-económico-metodología-aim.html"><a href="clasificación-por-nivel-socio-económico-metodología-aim.html#a.-cargar-nuestros-datos-1"><i class="fa fa-check"></i><b>4.2.1</b> <strong>a. Cargar nuestros datos</strong></a></li>
<li class="chapter" data-level="4.2.2" data-path="clasificación-por-nivel-socio-económico-metodología-aim.html"><a href="clasificación-por-nivel-socio-económico-metodología-aim.html#b.-recodificar-nuestras-variables-1"><i class="fa fa-check"></i><b>4.2.2</b> <strong>b. recodificar nuestras variables</strong></a></li>
<li class="chapter" data-level="4.2.3" data-path="clasificación-por-nivel-socio-económico-metodología-aim.html"><a href="clasificación-por-nivel-socio-económico-metodología-aim.html#c.-integrar-la-variable-gse-y-generar-recodificación-1"><i class="fa fa-check"></i><b>4.2.3</b> <strong>c. integrar la variable gse y generar recodificación</strong></a></li>
<li class="chapter" data-level="4.2.4" data-path="clasificación-por-nivel-socio-económico-metodología-aim.html"><a href="clasificación-por-nivel-socio-económico-metodología-aim.html#d.-exportar-bbdd-con-clasificación-socioeconómica"><i class="fa fa-check"></i><b>4.2.4</b> <strong>d. exportar BBDD con clasificación socioeconómica</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="malla-de-validación.html"><a href="malla-de-validación.html"><i class="fa fa-check"></i><b>5</b> Malla de validación</a>
<ul>
<li class="chapter" data-level="5.1" data-path="malla-de-validación.html"><a href="malla-de-validación.html#errores-de-valores-perdidos"><i class="fa fa-check"></i><b>5.1</b> Errores de valores perdidos</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="malla-de-validación.html"><a href="malla-de-validación.html#a-selección-de-id-y-variables-de-interés"><i class="fa fa-check"></i><b>5.1.1</b> a) selección de Id y variables de interés</a></li>
<li class="chapter" data-level="5.1.2" data-path="malla-de-validación.html"><a href="malla-de-validación.html#b-casos-perdidos-por-fila-y-columnas"><i class="fa fa-check"></i><b>5.1.2</b> b) casos perdidos por fila y columnas</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="malla-de-validación.html"><a href="malla-de-validación.html#errores-de-programación"><i class="fa fa-check"></i><b>5.2</b> Errores de programación</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="malla-de-validación.html"><a href="malla-de-validación.html#a-creación-de-excel-y-criterios-de-salto"><i class="fa fa-check"></i><b>5.2.1</b> a) creación de excel y criterios de salto</a></li>
<li class="chapter" data-level="5.2.2" data-path="malla-de-validación.html"><a href="malla-de-validación.html#b-aplicación-del-loop"><i class="fa fa-check"></i><b>5.2.2</b> b) aplicación del loop</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="malla-de-validación.html"><a href="malla-de-validación.html#errores-de-consistencia"><i class="fa fa-check"></i><b>5.3</b> Errores de consistencia</a></li>
<li class="chapter" data-level="5.4" data-path="malla-de-validación.html"><a href="malla-de-validación.html#errores-de-rango"><i class="fa fa-check"></i><b>5.4</b> Errores de rango</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="malla-de-validación.html"><a href="malla-de-validación.html#a-creación-de-excel-y-criterios-de-rango"><i class="fa fa-check"></i><b>5.4.1</b> a) creación de excel y criterios de rango</a></li>
<li class="chapter" data-level="5.4.2" data-path="malla-de-validación.html"><a href="malla-de-validación.html#b-aplicación-del-loop-1"><i class="fa fa-check"></i><b>5.4.2</b> b) aplicación del loop</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="construcción-de-ponderadores-por-raking.html"><a href="construcción-de-ponderadores-por-raking.html"><i class="fa fa-check"></i><b>6</b> Construcción de ponderadores por Raking</a>
<ul>
<li class="chapter" data-level="6.1" data-path="construcción-de-ponderadores-por-raking.html"><a href="construcción-de-ponderadores-por-raking.html#cargar-bases-de-datos-necesarias"><i class="fa fa-check"></i><b>6.1</b> Cargar bases de datos necesarias</a></li>
<li class="chapter" data-level="6.2" data-path="construcción-de-ponderadores-por-raking.html"><a href="construcción-de-ponderadores-por-raking.html#chequeo-de-variables"><i class="fa fa-check"></i><b>6.2</b> Chequeo de variables</a></li>
<li class="chapter" data-level="6.3" data-path="construcción-de-ponderadores-por-raking.html"><a href="construcción-de-ponderadores-por-raking.html#recodificaciones"><i class="fa fa-check"></i><b>6.3</b> Recodificaciones</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="construcción-de-ponderadores-por-raking.html"><a href="construcción-de-ponderadores-por-raking.html#recodificación-de-variables-en-bbdd-de-estudio"><i class="fa fa-check"></i><b>6.3.1</b> Recodificación de variables en BBDD de estudio</a></li>
<li class="chapter" data-level="6.3.2" data-path="construcción-de-ponderadores-por-raking.html"><a href="construcción-de-ponderadores-por-raking.html#recodificaciones-en-bbdd-de-proyecciones-pobalcionales"><i class="fa fa-check"></i><b>6.3.2</b> Recodificaciones en BBDD de proyecciones pobalcionales</a></li>
<li class="chapter" data-level="6.3.3" data-path="construcción-de-ponderadores-por-raking.html"><a href="construcción-de-ponderadores-por-raking.html#proyecciones-poblacionales-mayores-a-18-años"><i class="fa fa-check"></i><b>6.3.3</b> Proyecciones poblacionales mayores a 18 años</a></li>
<li class="chapter" data-level="6.3.4" data-path="construcción-de-ponderadores-por-raking.html"><a href="construcción-de-ponderadores-por-raking.html#recodificación-bbdd-casen-2020"><i class="fa fa-check"></i><b>6.3.4</b> Recodificación BBDD Casen 2020</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="construcción-de-ponderadores-por-raking.html"><a href="construcción-de-ponderadores-por-raking.html#construcción-del-ponderador"><i class="fa fa-check"></i><b>6.4</b> Construcción del ponderador</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="construcción-de-ponderadores-por-raking.html"><a href="construcción-de-ponderadores-por-raking.html#creación-de-un-objeto-sin-pesos"><i class="fa fa-check"></i><b>6.4.1</b> <em>Creación de un objeto sin pesos</em></a></li>
<li class="chapter" data-level="6.4.2" data-path="construcción-de-ponderadores-por-raking.html"><a href="construcción-de-ponderadores-por-raking.html#crear-las-distribuciones-marginales-poblacionales-de-cada-variable-a-utilizar-para-ponderar"><i class="fa fa-check"></i><b>6.4.2</b> <em>Crear las distribuciones marginales poblacionales de cada variable a utilizar para ponderar</em></a></li>
<li class="chapter" data-level="6.4.3" data-path="construcción-de-ponderadores-por-raking.html"><a href="construcción-de-ponderadores-por-raking.html#cáluclo-del-ponderador"><i class="fa fa-check"></i><b>6.4.3</b> <em>Cáluclo del ponderador</em></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html"><a href="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html"><i class="fa fa-check"></i><b>7</b> Introducción a RMarkdown y creación de reportes automáticos</a>
<ul>
<li class="chapter" data-level="7.1" data-path="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html"><a href="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html#qué-es-rmarkdown-rmd"><i class="fa fa-check"></i><b>7.1</b> ¿Qué es RMarkdown (RMD)?</a></li>
<li class="chapter" data-level="7.2" data-path="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html"><a href="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html#sintaxis-básica-de-escritura"><i class="fa fa-check"></i><b>7.2</b> Sintaxis básica de escritura</a></li>
<li class="chapter" data-level="7.3" data-path="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html"><a href="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html#creación-y-opciones-los-chunks"><i class="fa fa-check"></i><b>7.3</b> Creación y opciones los chunks</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html"><a href="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html#opciones-de-los-chunks"><i class="fa fa-check"></i><b>7.3.1</b> Opciones de los chunks:</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html"><a href="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html#reportes-automáticos"><i class="fa fa-check"></i><b>7.4</b> Reportes automáticos</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html"><a href="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html#reporte-encuestas-presenciales"><i class="fa fa-check"></i><b>7.4.1</b> Reporte encuestas presenciales</a></li>
<li class="chapter" data-level="7.4.2" data-path="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html"><a href="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html#reporte-encuestas-telefónicas"><i class="fa fa-check"></i><b>7.4.2</b> Reporte encuestas telefónicas</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Bookdown D&amp;A</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="construcción-de-ponderadores-por-raking" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number"> 6</span> Construcción de ponderadores por Raking<a href="construcción-de-ponderadores-por-raking.html#construcción-de-ponderadores-por-raking" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>La siguiente sección pretende ejemplificar la manera de construir un ponderador utilizando la nueva metodología empleada por el Instituto Nacional de Estadísticas de Chile (INE).</p>
<p>Para más información sobre la metodología visitar el siguiente <a href="https://www.ine.cl/docs/default-source/documentos-de-trabajo/nueva-metodolog%C3%ADa-de-calibraci%C3%B3n-de-la-ene-m%C3%A9todo-de-calibraci%C3%B3n-raking.pdf?sfvrsn=bfed7e52_2">link</a></p>
<p>El siguiente ejemplo pretende ponderar de acuerdo a las variables de: región, sexo, edad y educación. En este sentido, los valores que estimaremos como poblacionales de la región, el sexo y la edad los extraeremos de la BBDD de proyecciones del INE, mientras que los de educación los obtendremos desde la encuesta Casen 2020.</p>
<p><strong>Importante: para construir este tipo de ponderador es necesario utilizar la BBDD de estimaciones y proyecciones poblaciones del INE. <a href="https://github.com/Jona-S99/Bookdown/raw/master/BBDD/estimaciones-y-proyecciones-2002-2035-comunas.xlsx">Click aquí para descargar</a></strong></p>
<div id="cargar-bases-de-datos-necesarias" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Cargar bases de datos necesarias<a href="construcción-de-ponderadores-por-raking.html#cargar-bases-de-datos-necesarias" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Para llevar a cabo la construcción del ponderador necesitamos los siguientes elementos:</p>
<ul>
<li><p>BBDD de trabajo, a la cual queremos asignar ponderaciones.</p></li>
<li><p>BBDD seleccionadas por el analista.</p></li>
<li><p>BBDD de proyecciones poblacionales a nivel país. Algo a tener en cuenta es que esta BBDD se actualiza año a año.</p></li>
</ul>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="construcción-de-ponderadores-por-raking.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co"># libreria</span></span>
<span id="cb148-2"><a href="construcción-de-ponderadores-por-raking.html#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb148-3"><a href="construcción-de-ponderadores-por-raking.html#cb148-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-4"><a href="construcción-de-ponderadores-por-raking.html#cb148-4" aria-hidden="true" tabindex="-1"></a><span class="co"># BBDD de nuestro estudio (cambia segun caso)</span></span>
<span id="cb148-5"><a href="construcción-de-ponderadores-por-raking.html#cb148-5" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="st">&quot;BBDD/Base_final_DS2216_09_05_2022.sav&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb148-6"><a href="construcción-de-ponderadores-por-raking.html#cb148-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-7"><a href="construcción-de-ponderadores-por-raking.html#cb148-7" aria-hidden="true" tabindex="-1"></a><span class="co"># BBDD para extraer ponderador de educacion (cambia segun caso)</span></span>
<span id="cb148-8"><a href="construcción-de-ponderadores-por-raking.html#cb148-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Generalmente usamos CASEN 2017 O CASEN 2020</span></span>
<span id="cb148-9"><a href="construcción-de-ponderadores-por-raking.html#cb148-9" aria-hidden="true" tabindex="-1"></a>educ<span class="ot">&lt;-</span><span class="fu">read_sav</span>(<span class="st">&quot;BBDD/Casen en Pandemia 2020_STATA PMulti.sav&quot;</span>)</span>
<span id="cb148-10"><a href="construcción-de-ponderadores-por-raking.html#cb148-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-11"><a href="construcción-de-ponderadores-por-raking.html#cb148-11" aria-hidden="true" tabindex="-1"></a><span class="co"># BBDD para construir las proyecciones (se actualiza año a año)</span></span>
<span id="cb148-12"><a href="construcción-de-ponderadores-por-raking.html#cb148-12" aria-hidden="true" tabindex="-1"></a>proy <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;BBDD/estimaciones-y-proyecciones-2002-2035-comunas.xlsx&quot;</span>)</span></code></pre></div>
</div>
<div id="chequeo-de-variables" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Chequeo de variables<a href="construcción-de-ponderadores-por-raking.html#chequeo-de-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Como es costumbre, realizamos un primer análisis descriptivo de los datos para saber si debemos realizar recodificaciones o asignar valores perdidos.</p>
<p>En este ejemplo emplearemos los siguientes códigos para realizar la labor, si embargo, la aplicación de determinadas librerías quedan a discreción del analista en cuestión.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="construcción-de-ponderadores-por-raking.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables cualitativas</span></span>
<span id="cb149-2"><a href="construcción-de-ponderadores-por-raking.html#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (sexo, nivel educacional y region)</span></span>
<span id="cb149-3"><a href="construcción-de-ponderadores-por-raking.html#cb149-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjmisc)</span>
<span id="cb149-4"><a href="construcción-de-ponderadores-por-raking.html#cb149-4" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span> </span>
<span id="cb149-5"><a href="construcción-de-ponderadores-por-raking.html#cb149-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">frq</span>(P1,P3,P4)</span>
<span id="cb149-6"><a href="construcción-de-ponderadores-por-raking.html#cb149-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb149-7"><a href="construcción-de-ponderadores-por-raking.html#cb149-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables cuantitativas</span></span>
<span id="cb149-8"><a href="construcción-de-ponderadores-por-raking.html#cb149-8" aria-hidden="true" tabindex="-1"></a><span class="co"># (edad)</span></span>
<span id="cb149-9"><a href="construcción-de-ponderadores-por-raking.html#cb149-9" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span> </span>
<span id="cb149-10"><a href="construcción-de-ponderadores-por-raking.html#cb149-10" aria-hidden="true" tabindex="-1"></a>  sjmisc<span class="sc">::</span><span class="fu">descr</span>(P2)</span></code></pre></div>
</div>
<div id="recodificaciones" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Recodificaciones<a href="construcción-de-ponderadores-por-raking.html#recodificaciones" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Un requisito esencial para lograr construir el ponderador es que debemos <strong>homologar todas las variables que deseemos utilizar</strong>.</p>
<p>Es decir, realizar todas las recodificaciones necesarias a las variables que extraeremos de las bases de datos externas, para que así presenten la misma composición y orden que las variables de nuestra base de datos de estudio.</p>
<p><strong>Estas recodificaciones son un elemento central en el cálculo de los ponderadores</strong>, pues con ellas lograremos asignar y reestructurar los pesos en caso de ser necesario.</p>
<p><strong>Importante:</strong> todas la recodificaciones que se presentan en el ejemplo responden a su contexto. Cualquier otra aplicación debe contener sus propias recodificaciones según el los objetivos del estudio.</p>
<div id="recodificación-de-variables-en-bbdd-de-estudio" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Recodificación de variables en BBDD de estudio<a href="construcción-de-ponderadores-por-raking.html#recodificación-de-variables-en-bbdd-de-estudio" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="construcción-de-ponderadores-por-raking.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sexo</span></span>
<span id="cb150-2"><a href="construcción-de-ponderadores-por-raking.html#cb150-2" aria-hidden="true" tabindex="-1"></a>data1<span class="sc">$</span>P1<span class="ot">&lt;-</span><span class="fu">ifelse</span>(data1<span class="sc">$</span>P1<span class="sc">==</span><span class="dv">1</span>,<span class="st">&quot;Hombre&quot;</span>,<span class="st">&quot;Mujer&quot;</span>)</span>
<span id="cb150-3"><a href="construcción-de-ponderadores-por-raking.html#cb150-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-4"><a href="construcción-de-ponderadores-por-raking.html#cb150-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-5"><a href="construcción-de-ponderadores-por-raking.html#cb150-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Recodificacion de edad en tramos (valida de emplear solo para variables numericas)</span></span>
<span id="cb150-6"><a href="construcción-de-ponderadores-por-raking.html#cb150-6" aria-hidden="true" tabindex="-1"></a>data1<span class="ot">&lt;-</span>data1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">edad_rec=</span><span class="fu">case_when</span>(<span class="fu">between</span>(P2,<span class="dv">18</span>,<span class="dv">30</span>)<span class="sc">~</span> <span class="st">&quot;18 a 30 años&quot;</span>,</span>
<span id="cb150-7"><a href="construcción-de-ponderadores-por-raking.html#cb150-7" aria-hidden="true" tabindex="-1"></a>                                        <span class="fu">between</span>(P2,<span class="dv">31</span>,<span class="dv">40</span>)<span class="sc">~</span> <span class="st">&quot;31 a 40 años&quot;</span>,</span>
<span id="cb150-8"><a href="construcción-de-ponderadores-por-raking.html#cb150-8" aria-hidden="true" tabindex="-1"></a>                                        <span class="fu">between</span>(P2,<span class="dv">41</span>,<span class="dv">54</span>)<span class="sc">~</span> <span class="st">&quot;41 a 54 años&quot;</span>,</span>
<span id="cb150-9"><a href="construcción-de-ponderadores-por-raking.html#cb150-9" aria-hidden="true" tabindex="-1"></a>                                        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;55 años o más&quot;</span>))</span>
<span id="cb150-10"><a href="construcción-de-ponderadores-por-raking.html#cb150-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-11"><a href="construcción-de-ponderadores-por-raking.html#cb150-11" aria-hidden="true" tabindex="-1"></a><span class="co"># renombrar variable region</span></span>
<span id="cb150-12"><a href="construcción-de-ponderadores-por-raking.html#cb150-12" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> data1 <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;P4&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="construcción-de-ponderadores-por-raking.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># educacion</span></span>
<span id="cb151-2"><a href="construcción-de-ponderadores-por-raking.html#cb151-2" aria-hidden="true" tabindex="-1"></a>data1<span class="sc">$</span>P3<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(data1<span class="sc">$</span>P3)</span>
<span id="cb151-3"><a href="construcción-de-ponderadores-por-raking.html#cb151-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-4"><a href="construcción-de-ponderadores-por-raking.html#cb151-4" aria-hidden="true" tabindex="-1"></a>data1<span class="ot">&lt;-</span>data1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">educ_rec=</span><span class="fu">case_when</span>(<span class="fu">between</span>(P3,<span class="dv">1</span>,<span class="dv">5</span>)<span class="sc">~</span> <span class="st">&quot;humanidades completa o menos&quot;</span>,</span>
<span id="cb151-5"><a href="construcción-de-ponderadores-por-raking.html#cb151-5" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">between</span>(P3,<span class="dv">6</span>,<span class="dv">8</span>)<span class="sc">~</span> <span class="st">&quot;CFT inc-Universidad inc&quot;</span>,</span>
<span id="cb151-6"><a href="construcción-de-ponderadores-por-raking.html#cb151-6" aria-hidden="true" tabindex="-1"></a>                                           <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Universitaria completa o superior&quot;</span>))</span>
<span id="cb151-7"><a href="construcción-de-ponderadores-por-raking.html#cb151-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-8"><a href="construcción-de-ponderadores-por-raking.html#cb151-8" aria-hidden="true" tabindex="-1"></a>data1<span class="sc">$</span>educ_rec<span class="ot">&lt;-</span><span class="fu">factor</span>(data1<span class="sc">$</span>educ_rec, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;humanidades completa o menos&quot;</span>,</span>
<span id="cb151-9"><a href="construcción-de-ponderadores-por-raking.html#cb151-9" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;CFT inc-Universidad inc&quot;</span>,</span>
<span id="cb151-10"><a href="construcción-de-ponderadores-por-raking.html#cb151-10" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Universitaria completa o superior&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="construcción-de-ponderadores-por-raking.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edad_Sexo</span></span>
<span id="cb152-2"><a href="construcción-de-ponderadores-por-raking.html#cb152-2" aria-hidden="true" tabindex="-1"></a>data1<span class="sc">$</span>edad_sexo<span class="ot">&lt;-</span><span class="fu">paste0</span>(data1<span class="sc">$</span>P1,<span class="st">&quot; &quot;</span>,data1<span class="sc">$</span>edad_rec)</span>
<span id="cb152-3"><a href="construcción-de-ponderadores-por-raking.html#cb152-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-4"><a href="construcción-de-ponderadores-por-raking.html#cb152-4" aria-hidden="true" tabindex="-1"></a>data1<span class="sc">$</span>edad_sexo<span class="ot">&lt;-</span><span class="fu">as.character</span>(data1<span class="sc">$</span>edad_sexo)</span>
<span id="cb152-5"><a href="construcción-de-ponderadores-por-raking.html#cb152-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-6"><a href="construcción-de-ponderadores-por-raking.html#cb152-6" aria-hidden="true" tabindex="-1"></a>data1<span class="sc">$</span>edad_sexo<span class="ot">&lt;-</span><span class="fu">factor</span>(data1<span class="sc">$</span>edad_sexo, <span class="at">levels =</span> <span class="fu">c</span>( <span class="st">&quot;Hombre 18 a 30 años&quot;</span>,</span>
<span id="cb152-7"><a href="construcción-de-ponderadores-por-raking.html#cb152-7" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">&quot;Hombre 31 a 40 años&quot;</span>,</span>
<span id="cb152-8"><a href="construcción-de-ponderadores-por-raking.html#cb152-8" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">&quot;Hombre 41 a 54 años&quot;</span>,</span>
<span id="cb152-9"><a href="construcción-de-ponderadores-por-raking.html#cb152-9" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">&quot;Hombre 55 años o más&quot;</span>,</span>
<span id="cb152-10"><a href="construcción-de-ponderadores-por-raking.html#cb152-10" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">&quot;Mujer 18 a 30 años&quot;</span>,</span>
<span id="cb152-11"><a href="construcción-de-ponderadores-por-raking.html#cb152-11" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">&quot;Mujer 31 a 40 años&quot;</span>,</span>
<span id="cb152-12"><a href="construcción-de-ponderadores-por-raking.html#cb152-12" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">&quot;Mujer 41 a 54 años&quot;</span>,</span>
<span id="cb152-13"><a href="construcción-de-ponderadores-por-raking.html#cb152-13" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">&quot;Mujer 55 años o más&quot;</span>))</span></code></pre></div>
</div>
<div id="recodificaciones-en-bbdd-de-proyecciones-pobalcionales" class="section level3 hasAnchor" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> Recodificaciones en BBDD de proyecciones pobalcionales<a href="construcción-de-ponderadores-por-raking.html#recodificaciones-en-bbdd-de-proyecciones-pobalcionales" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="construcción-de-ponderadores-por-raking.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seleccionar variables de interes</span></span>
<span id="cb153-2"><a href="construcción-de-ponderadores-por-raking.html#cb153-2" aria-hidden="true" tabindex="-1"></a>proy<span class="ot">&lt;-</span>proy[,<span class="fu">c</span>( <span class="st">&quot;Nombre Region&quot;</span>,</span>
<span id="cb153-3"><a href="construcción-de-ponderadores-por-raking.html#cb153-3" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;Sexo</span><span class="sc">\r\n</span><span class="st">1=Hombre</span><span class="sc">\r\n</span><span class="st">2=Mujer&quot;</span>,</span>
<span id="cb153-4"><a href="construcción-de-ponderadores-por-raking.html#cb153-4" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;Edad&quot;</span>,</span>
<span id="cb153-5"><a href="construcción-de-ponderadores-por-raking.html#cb153-5" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;Poblacion 2021&quot;</span>)]</span>
<span id="cb153-6"><a href="construcción-de-ponderadores-por-raking.html#cb153-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-7"><a href="construcción-de-ponderadores-por-raking.html#cb153-7" aria-hidden="true" tabindex="-1"></a><span class="co"># renombrar variable sexo</span></span>
<span id="cb153-8"><a href="construcción-de-ponderadores-por-raking.html#cb153-8" aria-hidden="true" tabindex="-1"></a>proy <span class="ot">&lt;-</span> proy <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">&quot;sexo&quot;</span> <span class="ot">=</span> <span class="st">&quot;Sexo</span><span class="sc">\r\n</span><span class="st">1=Hombre</span><span class="sc">\r\n</span><span class="st">2=Mujer&quot;</span>)</span>
<span id="cb153-9"><a href="construcción-de-ponderadores-por-raking.html#cb153-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-10"><a href="construcción-de-ponderadores-por-raking.html#cb153-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-11"><a href="construcción-de-ponderadores-por-raking.html#cb153-11" aria-hidden="true" tabindex="-1"></a><span class="co"># recodificar regiones</span></span>
<span id="cb153-12"><a href="construcción-de-ponderadores-por-raking.html#cb153-12" aria-hidden="true" tabindex="-1"></a>proy<span class="sc">$</span>region <span class="ot">&lt;-</span> <span class="fu">case_when</span>(proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Tarapacá&quot;</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb153-13"><a href="construcción-de-ponderadores-por-raking.html#cb153-13" aria-hidden="true" tabindex="-1"></a>                         proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Antofagasta&quot;</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb153-14"><a href="construcción-de-ponderadores-por-raking.html#cb153-14" aria-hidden="true" tabindex="-1"></a>                         proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Atacama&quot;</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb153-15"><a href="construcción-de-ponderadores-por-raking.html#cb153-15" aria-hidden="true" tabindex="-1"></a>                         proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Coquimbo&quot;</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb153-16"><a href="construcción-de-ponderadores-por-raking.html#cb153-16" aria-hidden="true" tabindex="-1"></a>                         proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Valparaíso&quot;</span> <span class="sc">~</span> <span class="dv">5</span>,</span>
<span id="cb153-17"><a href="construcción-de-ponderadores-por-raking.html#cb153-17" aria-hidden="true" tabindex="-1"></a>                         proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Libertador General Bernardo O&#39;Higgins&quot;</span> <span class="sc">~</span> <span class="dv">6</span>,</span>
<span id="cb153-18"><a href="construcción-de-ponderadores-por-raking.html#cb153-18" aria-hidden="true" tabindex="-1"></a>                         proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Maule&quot;</span> <span class="sc">~</span> <span class="dv">7</span>,</span>
<span id="cb153-19"><a href="construcción-de-ponderadores-por-raking.html#cb153-19" aria-hidden="true" tabindex="-1"></a>                         proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Biobío&quot;</span> <span class="sc">~</span> <span class="dv">8</span>,</span>
<span id="cb153-20"><a href="construcción-de-ponderadores-por-raking.html#cb153-20" aria-hidden="true" tabindex="-1"></a>                         proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;La Araucanía&quot;</span> <span class="sc">~</span> <span class="dv">9</span>,</span>
<span id="cb153-21"><a href="construcción-de-ponderadores-por-raking.html#cb153-21" aria-hidden="true" tabindex="-1"></a>                         proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Los Lagos&quot;</span> <span class="sc">~</span> <span class="dv">10</span>,</span>
<span id="cb153-22"><a href="construcción-de-ponderadores-por-raking.html#cb153-22" aria-hidden="true" tabindex="-1"></a>                         proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Aysén del General Carlos Ibáñez del Campo&quot;</span> <span class="sc">~</span> <span class="dv">11</span>,</span>
<span id="cb153-23"><a href="construcción-de-ponderadores-por-raking.html#cb153-23" aria-hidden="true" tabindex="-1"></a>                         proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Magallanes y de la Antártica Chilena&quot;</span> <span class="sc">~</span> <span class="dv">12</span>,</span>
<span id="cb153-24"><a href="construcción-de-ponderadores-por-raking.html#cb153-24" aria-hidden="true" tabindex="-1"></a>                         proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Metropolitana de Santiago&quot;</span> <span class="sc">~</span> <span class="dv">13</span>,</span>
<span id="cb153-25"><a href="construcción-de-ponderadores-por-raking.html#cb153-25" aria-hidden="true" tabindex="-1"></a>                         proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Los Ríos&quot;</span> <span class="sc">~</span> <span class="dv">14</span>,</span>
<span id="cb153-26"><a href="construcción-de-ponderadores-por-raking.html#cb153-26" aria-hidden="true" tabindex="-1"></a>                         proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Arica y Parinacota&quot;</span> <span class="sc">~</span> <span class="dv">15</span>,</span>
<span id="cb153-27"><a href="construcción-de-ponderadores-por-raking.html#cb153-27" aria-hidden="true" tabindex="-1"></a>                         proy<span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Ñuble&quot;</span> <span class="sc">~</span> <span class="dv">16</span>)</span></code></pre></div>
</div>
<div id="proyecciones-poblacionales-mayores-a-18-años" class="section level3 hasAnchor" number="6.3.3">
<h3><span class="header-section-number">6.3.3</span> Proyecciones poblacionales mayores a 18 años<a href="construcción-de-ponderadores-por-raking.html#proyecciones-poblacionales-mayores-a-18-años" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="construcción-de-ponderadores-por-raking.html#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co"># REGION</span></span>
<span id="cb154-2"><a href="construcción-de-ponderadores-por-raking.html#cb154-2" aria-hidden="true" tabindex="-1"></a>proy<span class="fl">.18</span><span class="ot">&lt;-</span>proy <span class="sc">%&gt;%</span> </span>
<span id="cb154-3"><a href="construcción-de-ponderadores-por-raking.html#cb154-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Edad<span class="sc">&gt;=</span><span class="dv">18</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb154-4"><a href="construcción-de-ponderadores-por-raking.html#cb154-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">&quot;Nombre Region&quot;</span>,<span class="st">&quot;Poblacion 2021&quot;</span>)</span>
<span id="cb154-5"><a href="construcción-de-ponderadores-por-raking.html#cb154-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-6"><a href="construcción-de-ponderadores-por-raking.html#cb154-6" aria-hidden="true" tabindex="-1"></a><span class="co"># conteo de poblacion mayor de 18 años por region</span></span>
<span id="cb154-7"><a href="construcción-de-ponderadores-por-raking.html#cb154-7" aria-hidden="true" tabindex="-1"></a>proy<span class="fl">.18</span><span class="ot">&lt;-</span>proy<span class="fl">.18</span> <span class="sc">%&gt;%</span> </span>
<span id="cb154-8"><a href="construcción-de-ponderadores-por-raking.html#cb154-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(<span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb154-9"><a href="construcción-de-ponderadores-por-raking.html#cb154-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Poblacion 2021</span><span class="st">`</span>))</span>
<span id="cb154-10"><a href="construcción-de-ponderadores-por-raking.html#cb154-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-11"><a href="construcción-de-ponderadores-por-raking.html#cb154-11" aria-hidden="true" tabindex="-1"></a><span class="co"># proporcion de personas mayores de 18 años por region</span></span>
<span id="cb154-12"><a href="construcción-de-ponderadores-por-raking.html#cb154-12" aria-hidden="true" tabindex="-1"></a>proy<span class="fl">.18</span><span class="sc">$</span>porcentaje<span class="ot">&lt;-</span>proy<span class="fl">.18</span><span class="sc">$</span>n<span class="sc">/</span><span class="fu">sum</span>(proy<span class="fl">.18</span><span class="sc">$</span>n)</span>
<span id="cb154-13"><a href="construcción-de-ponderadores-por-raking.html#cb154-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-14"><a href="construcción-de-ponderadores-por-raking.html#cb154-14" aria-hidden="true" tabindex="-1"></a><span class="co"># homologar recodificacion segun bbdd de estudio</span></span>
<span id="cb154-15"><a href="construcción-de-ponderadores-por-raking.html#cb154-15" aria-hidden="true" tabindex="-1"></a>proy<span class="fl">.18</span><span class="sc">$</span>orden <span class="ot">&lt;-</span> <span class="fu">case_when</span>(proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Tarapacá&quot;</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb154-16"><a href="construcción-de-ponderadores-por-raking.html#cb154-16" aria-hidden="true" tabindex="-1"></a>          proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Antofagasta&quot;</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb154-17"><a href="construcción-de-ponderadores-por-raking.html#cb154-17" aria-hidden="true" tabindex="-1"></a>          proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Atacama&quot;</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb154-18"><a href="construcción-de-ponderadores-por-raking.html#cb154-18" aria-hidden="true" tabindex="-1"></a>          proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Coquimbo&quot;</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb154-19"><a href="construcción-de-ponderadores-por-raking.html#cb154-19" aria-hidden="true" tabindex="-1"></a>          proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Valparaíso&quot;</span> <span class="sc">~</span> <span class="dv">5</span>,</span>
<span id="cb154-20"><a href="construcción-de-ponderadores-por-raking.html#cb154-20" aria-hidden="true" tabindex="-1"></a>          proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Libertador General Bernardo O&#39;Higgins&quot;</span> <span class="sc">~</span> <span class="dv">6</span>,</span>
<span id="cb154-21"><a href="construcción-de-ponderadores-por-raking.html#cb154-21" aria-hidden="true" tabindex="-1"></a>          proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Maule&quot;</span> <span class="sc">~</span> <span class="dv">7</span>,</span>
<span id="cb154-22"><a href="construcción-de-ponderadores-por-raking.html#cb154-22" aria-hidden="true" tabindex="-1"></a>          proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Biobío&quot;</span> <span class="sc">~</span> <span class="dv">8</span>,</span>
<span id="cb154-23"><a href="construcción-de-ponderadores-por-raking.html#cb154-23" aria-hidden="true" tabindex="-1"></a>          proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;La Araucanía&quot;</span> <span class="sc">~</span> <span class="dv">9</span>,</span>
<span id="cb154-24"><a href="construcción-de-ponderadores-por-raking.html#cb154-24" aria-hidden="true" tabindex="-1"></a>          proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Los Lagos&quot;</span> <span class="sc">~</span> <span class="dv">10</span>,</span>
<span id="cb154-25"><a href="construcción-de-ponderadores-por-raking.html#cb154-25" aria-hidden="true" tabindex="-1"></a>          proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Aysén del General Carlos Ibáñez del Campo&quot;</span> <span class="sc">~</span> <span class="dv">11</span>,</span>
<span id="cb154-26"><a href="construcción-de-ponderadores-por-raking.html#cb154-26" aria-hidden="true" tabindex="-1"></a>          proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Magallanes y de la Antártica Chilena&quot;</span> <span class="sc">~</span> <span class="dv">12</span>,</span>
<span id="cb154-27"><a href="construcción-de-ponderadores-por-raking.html#cb154-27" aria-hidden="true" tabindex="-1"></a>          proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Metropolitana de Santiago&quot;</span> <span class="sc">~</span> <span class="dv">13</span>,</span>
<span id="cb154-28"><a href="construcción-de-ponderadores-por-raking.html#cb154-28" aria-hidden="true" tabindex="-1"></a>          proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Los Ríos&quot;</span> <span class="sc">~</span> <span class="dv">14</span>,</span>
<span id="cb154-29"><a href="construcción-de-ponderadores-por-raking.html#cb154-29" aria-hidden="true" tabindex="-1"></a>          proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Arica y Parinacota&quot;</span> <span class="sc">~</span> <span class="dv">15</span>,</span>
<span id="cb154-30"><a href="construcción-de-ponderadores-por-raking.html#cb154-30" aria-hidden="true" tabindex="-1"></a>          proy<span class="fl">.18</span><span class="sc">$</span><span class="st">`</span><span class="at">Nombre Region</span><span class="st">`</span><span class="sc">==</span><span class="st">&quot;Ñuble&quot;</span> <span class="sc">~</span> <span class="dv">16</span>)</span>
<span id="cb154-31"><a href="construcción-de-ponderadores-por-raking.html#cb154-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-32"><a href="construcción-de-ponderadores-por-raking.html#cb154-32" aria-hidden="true" tabindex="-1"></a><span class="co"># ordenar de forma ascendente</span></span>
<span id="cb154-33"><a href="construcción-de-ponderadores-por-raking.html#cb154-33" aria-hidden="true" tabindex="-1"></a>proy<span class="fl">.18</span><span class="ot">&lt;-</span>proy<span class="fl">.18</span>[<span class="fu">order</span>(proy<span class="fl">.18</span><span class="sc">$</span>orden),]</span>
<span id="cb154-34"><a href="construcción-de-ponderadores-por-raking.html#cb154-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-35"><a href="construcción-de-ponderadores-por-raking.html#cb154-35" aria-hidden="true" tabindex="-1"></a><span class="co"># ordenar de forma descendente</span></span>
<span id="cb154-36"><a href="construcción-de-ponderadores-por-raking.html#cb154-36" aria-hidden="true" tabindex="-1"></a><span class="co">#proy.18$orden &lt;- proy.18 %&gt;% dplyr::arrange(desc(orden))</span></span></code></pre></div>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="construcción-de-ponderadores-por-raking.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># SEXO Y EDAD</span></span>
<span id="cb155-2"><a href="construcción-de-ponderadores-por-raking.html#cb155-2" aria-hidden="true" tabindex="-1"></a>proy.<span class="fl">18.</span>se<span class="ot">&lt;-</span>proy <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Edad<span class="sc">&gt;=</span><span class="dv">18</span>)</span>
<span id="cb155-3"><a href="construcción-de-ponderadores-por-raking.html#cb155-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-4"><a href="construcción-de-ponderadores-por-raking.html#cb155-4" aria-hidden="true" tabindex="-1"></a><span class="co"># homologamos la variable sexo con la distribucion de la bbdd de estudio</span></span>
<span id="cb155-5"><a href="construcción-de-ponderadores-por-raking.html#cb155-5" aria-hidden="true" tabindex="-1"></a>proy.<span class="fl">18.</span>se<span class="sc">$</span>sexo<span class="ot">&lt;-</span><span class="fu">ifelse</span>(proy.<span class="fl">18.</span>se<span class="sc">$</span>sexo<span class="sc">==</span><span class="dv">1</span>,<span class="st">&quot;Hombre&quot;</span>,<span class="st">&quot;Mujer&quot;</span>)</span>
<span id="cb155-6"><a href="construcción-de-ponderadores-por-raking.html#cb155-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-7"><a href="construcción-de-ponderadores-por-raking.html#cb155-7" aria-hidden="true" tabindex="-1"></a><span class="co"># homologamos la recodificacion de nuestra bbdd de estudio</span></span>
<span id="cb155-8"><a href="construcción-de-ponderadores-por-raking.html#cb155-8" aria-hidden="true" tabindex="-1"></a>proy.<span class="fl">18.</span>se<span class="ot">&lt;-</span>proy.<span class="fl">18.</span>se <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">edad_rec=</span><span class="fu">case_when</span>(<span class="fu">between</span>(Edad,<span class="dv">18</span>,<span class="dv">30</span>)<span class="sc">~</span> <span class="st">&quot;18 a 30 años&quot;</span>,</span>
<span id="cb155-9"><a href="construcción-de-ponderadores-por-raking.html#cb155-9" aria-hidden="true" tabindex="-1"></a>                                                    <span class="fu">between</span>(Edad,<span class="dv">31</span>,<span class="dv">40</span>)<span class="sc">~</span> <span class="st">&quot;31 a 40 años&quot;</span>,</span>
<span id="cb155-10"><a href="construcción-de-ponderadores-por-raking.html#cb155-10" aria-hidden="true" tabindex="-1"></a>                                                    <span class="fu">between</span>(Edad,<span class="dv">41</span>,<span class="dv">54</span>)<span class="sc">~</span> <span class="st">&quot;41 a 54 años&quot;</span>,</span>
<span id="cb155-11"><a href="construcción-de-ponderadores-por-raking.html#cb155-11" aria-hidden="true" tabindex="-1"></a>                                                    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;55 años o más&quot;</span>))</span>
<span id="cb155-12"><a href="construcción-de-ponderadores-por-raking.html#cb155-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-13"><a href="construcción-de-ponderadores-por-raking.html#cb155-13" aria-hidden="true" tabindex="-1"></a><span class="co"># frecuencia absoluta</span></span>
<span id="cb155-14"><a href="construcción-de-ponderadores-por-raking.html#cb155-14" aria-hidden="true" tabindex="-1"></a>proy.<span class="fl">18.</span>se<span class="ot">&lt;-</span>proy.<span class="fl">18.</span>se <span class="sc">%&gt;%</span> </span>
<span id="cb155-15"><a href="construcción-de-ponderadores-por-raking.html#cb155-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(edad_rec,sexo) <span class="sc">%&gt;%</span> </span>
<span id="cb155-16"><a href="construcción-de-ponderadores-por-raking.html#cb155-16" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Poblacion 2021</span><span class="st">`</span>))</span>
<span id="cb155-17"><a href="construcción-de-ponderadores-por-raking.html#cb155-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-18"><a href="construcción-de-ponderadores-por-raking.html#cb155-18" aria-hidden="true" tabindex="-1"></a><span class="co"># proy.18.se&lt;-proy.18.se %&gt;% ungroup() # remueve agrupacion</span></span>
<span id="cb155-19"><a href="construcción-de-ponderadores-por-raking.html#cb155-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-20"><a href="construcción-de-ponderadores-por-raking.html#cb155-20" aria-hidden="true" tabindex="-1"></a><span class="co"># frecuencia relativa</span></span>
<span id="cb155-21"><a href="construcción-de-ponderadores-por-raking.html#cb155-21" aria-hidden="true" tabindex="-1"></a>proy.<span class="fl">18.</span>se<span class="sc">$</span>porcentaje<span class="ot">&lt;-</span>proy.<span class="fl">18.</span>se<span class="sc">$</span>n<span class="sc">/</span><span class="fu">sum</span>(proy.<span class="fl">18.</span>se<span class="sc">$</span>n)</span>
<span id="cb155-22"><a href="construcción-de-ponderadores-por-raking.html#cb155-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-23"><a href="construcción-de-ponderadores-por-raking.html#cb155-23" aria-hidden="true" tabindex="-1"></a><span class="co"># unir sexo y edad en una sola variablepro</span></span>
<span id="cb155-24"><a href="construcción-de-ponderadores-por-raking.html#cb155-24" aria-hidden="true" tabindex="-1"></a>proy.<span class="fl">18.</span>se<span class="sc">$</span>edad_sexo<span class="ot">&lt;-</span><span class="fu">paste0</span>(proy.<span class="fl">18.</span>se<span class="sc">$</span>sexo,<span class="st">&quot; &quot;</span>,proy.<span class="fl">18.</span>se<span class="sc">$</span>edad_rec)</span></code></pre></div>
</div>
<div id="recodificación-bbdd-casen-2020" class="section level3 hasAnchor" number="6.3.4">
<h3><span class="header-section-number">6.3.4</span> Recodificación BBDD Casen 2020<a href="construcción-de-ponderadores-por-raking.html#recodificación-bbdd-casen-2020" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="construcción-de-ponderadores-por-raking.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># NIVEL EDCUCACIONAL</span></span>
<span id="cb156-2"><a href="construcción-de-ponderadores-por-raking.html#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="co"># seleccionamos los casos mayores a 18 años</span></span>
<span id="cb156-3"><a href="construcción-de-ponderadores-por-raking.html#cb156-3" aria-hidden="true" tabindex="-1"></a>educ<span class="ot">&lt;-</span>educ <span class="sc">%&gt;%</span> <span class="fu">filter</span>(edad<span class="sc">&gt;=</span><span class="dv">18</span>)</span>
<span id="cb156-4"><a href="construcción-de-ponderadores-por-raking.html#cb156-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-5"><a href="construcción-de-ponderadores-por-raking.html#cb156-5" aria-hidden="true" tabindex="-1"></a><span class="co"># nuevo dataframe con educacion y personas mayores a 18 años</span></span>
<span id="cb156-6"><a href="construcción-de-ponderadores-por-raking.html#cb156-6" aria-hidden="true" tabindex="-1"></a>educ1<span class="ot">&lt;-</span>educ <span class="sc">%&gt;%</span> <span class="fu">select</span>(educ)</span>
<span id="cb156-7"><a href="construcción-de-ponderadores-por-raking.html#cb156-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-8"><a href="construcción-de-ponderadores-por-raking.html#cb156-8" aria-hidden="true" tabindex="-1"></a><span class="co"># transformacion de la variable a numérica</span></span>
<span id="cb156-9"><a href="construcción-de-ponderadores-por-raking.html#cb156-9" aria-hidden="true" tabindex="-1"></a>educ1<span class="sc">$</span>educ<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(educ1<span class="sc">$</span>educ)</span>
<span id="cb156-10"><a href="construcción-de-ponderadores-por-raking.html#cb156-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-11"><a href="construcción-de-ponderadores-por-raking.html#cb156-11" aria-hidden="true" tabindex="-1"></a><span class="co"># eliminamos los valores perdidos codificados como 99</span></span>
<span id="cb156-12"><a href="construcción-de-ponderadores-por-raking.html#cb156-12" aria-hidden="true" tabindex="-1"></a>educ1<span class="ot">&lt;-</span>educ1 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(educ<span class="sc">&lt;</span><span class="dv">99</span>)</span>
<span id="cb156-13"><a href="construcción-de-ponderadores-por-raking.html#cb156-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-14"><a href="construcción-de-ponderadores-por-raking.html#cb156-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-15"><a href="construcción-de-ponderadores-por-raking.html#cb156-15" aria-hidden="true" tabindex="-1"></a><span class="co"># recodificacion homologa de la variable</span></span>
<span id="cb156-16"><a href="construcción-de-ponderadores-por-raking.html#cb156-16" aria-hidden="true" tabindex="-1"></a>educ1<span class="ot">&lt;-</span>educ1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">educ_rec=</span><span class="fu">case_when</span>(<span class="fu">between</span>(educ,<span class="dv">0</span>,<span class="dv">6</span>)<span class="sc">~</span> <span class="st">&quot;humanidades completa o menos&quot;</span>,</span>
<span id="cb156-17"><a href="construcción-de-ponderadores-por-raking.html#cb156-17" aria-hidden="true" tabindex="-1"></a>                                                   <span class="fu">between</span>(educ,<span class="dv">7</span>,<span class="dv">9</span>)<span class="sc">~</span> <span class="st">&quot;CFT inc-Universidad inc&quot;</span>,</span>
<span id="cb156-18"><a href="construcción-de-ponderadores-por-raking.html#cb156-18" aria-hidden="true" tabindex="-1"></a>                                                   <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Universitaria completa o superior&quot;</span>))</span>
<span id="cb156-19"><a href="construcción-de-ponderadores-por-raking.html#cb156-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-20"><a href="construcción-de-ponderadores-por-raking.html#cb156-20" aria-hidden="true" tabindex="-1"></a><span class="co"># asigancion del orden de las categorias</span></span>
<span id="cb156-21"><a href="construcción-de-ponderadores-por-raking.html#cb156-21" aria-hidden="true" tabindex="-1"></a>educ1<span class="sc">$</span>educ_rec<span class="ot">&lt;-</span><span class="fu">factor</span>(educ1<span class="sc">$</span>educ_rec, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;humanidades completa o menos&quot;</span>,</span>
<span id="cb156-22"><a href="construcción-de-ponderadores-por-raking.html#cb156-22" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;CFT inc-Universidad inc&quot;</span>,</span>
<span id="cb156-23"><a href="construcción-de-ponderadores-por-raking.html#cb156-23" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Universitaria completa o superior&quot;</span>))</span>
<span id="cb156-24"><a href="construcción-de-ponderadores-por-raking.html#cb156-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-25"><a href="construcción-de-ponderadores-por-raking.html#cb156-25" aria-hidden="true" tabindex="-1"></a><span class="do">## creacion tabla de proporciones ##</span></span>
<span id="cb156-26"><a href="construcción-de-ponderadores-por-raking.html#cb156-26" aria-hidden="true" tabindex="-1"></a><span class="co"># a. nombres</span></span>
<span id="cb156-27"><a href="construcción-de-ponderadores-por-raking.html#cb156-27" aria-hidden="true" tabindex="-1"></a>educacion.n<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="fu">names</span>(<span class="fu">table</span>(educ1<span class="sc">$</span>educ_rec)))</span>
<span id="cb156-28"><a href="construcción-de-ponderadores-por-raking.html#cb156-28" aria-hidden="true" tabindex="-1"></a><span class="co"># b. proporciones</span></span>
<span id="cb156-29"><a href="construcción-de-ponderadores-por-raking.html#cb156-29" aria-hidden="true" tabindex="-1"></a>educacion.n<span class="sc">$</span>prop<span class="ot">&lt;-</span><span class="fu">as.vector</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(educ1<span class="sc">$</span>educ_rec)))</span>
<span id="cb156-30"><a href="construcción-de-ponderadores-por-raking.html#cb156-30" aria-hidden="true" tabindex="-1"></a><span class="co"># c. nombre de primera variable</span></span>
<span id="cb156-31"><a href="construcción-de-ponderadores-por-raking.html#cb156-31" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(educacion.n)[<span class="dv">1</span>]<span class="ot">=</span><span class="st">&quot;educ&quot;</span></span>
<span id="cb156-32"><a href="construcción-de-ponderadores-por-raking.html#cb156-32" aria-hidden="true" tabindex="-1"></a><span class="co"># d. asignacion de categorias</span></span>
<span id="cb156-33"><a href="construcción-de-ponderadores-por-raking.html#cb156-33" aria-hidden="true" tabindex="-1"></a>educacion.n<span class="sc">$</span>educ <span class="ot">&lt;-</span><span class="fu">factor</span>(educacion.n<span class="sc">$</span>educ, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;humanidades completa o menos&quot;</span>,</span>
<span id="cb156-34"><a href="construcción-de-ponderadores-por-raking.html#cb156-34" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;CFT inc-Universidad inc&quot;</span>,</span>
<span id="cb156-35"><a href="construcción-de-ponderadores-por-raking.html#cb156-35" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;Universitaria completa o superior&quot;</span>))</span></code></pre></div>
</div>
</div>
<div id="construcción-del-ponderador" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Construcción del ponderador<a href="construcción-de-ponderadores-por-raking.html#construcción-del-ponderador" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="creación-de-un-objeto-sin-pesos" class="section level3 hasAnchor" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> <em>Creación de un objeto sin pesos</em><a href="construcción-de-ponderadores-por-raking.html#creación-de-un-objeto-sin-pesos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>El argumento ids se utiliza para decirle a la encuesta que todos los datos provienen de una sola unidad primaria de muestreo.</p>
<p>En data debemos agregar nuestra BBDD original.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="construcción-de-ponderadores-por-raking.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survey)</span>
<span id="cb157-2"><a href="construcción-de-ponderadores-por-raking.html#cb157-2" aria-hidden="true" tabindex="-1"></a>dummy_survey_unweighted <span class="ot">&lt;-</span> <span class="fu">svydesign</span>(<span class="at">ids =</span> <span class="sc">~</span><span class="dv">1</span>,     </span>
<span id="cb157-3"><a href="construcción-de-ponderadores-por-raking.html#cb157-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">data =</span> data1, </span>
<span id="cb157-4"><a href="construcción-de-ponderadores-por-raking.html#cb157-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">weights =</span> <span class="cn">NULL</span>)</span></code></pre></div>
</div>
<div id="crear-las-distribuciones-marginales-poblacionales-de-cada-variable-a-utilizar-para-ponderar" class="section level3 hasAnchor" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> <em>Crear las distribuciones marginales poblacionales de cada variable a utilizar para ponderar</em><a href="construcción-de-ponderadores-por-raking.html#crear-las-distribuciones-marginales-poblacionales-de-cada-variable-a-utilizar-para-ponderar" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Aquí agregar todas las distribuciones marginales de todas las variables que se desean ponderar. Cada marco de datos consta de dos vectores: uno que describe los niveles del factor asociado y el otro las frecuencias correspondientes.</p>
<p>Tenga en cuenta que multiplicamos las frecuencias relativas teóricamente conocidas como las hemos obtenido de nuestra población de referencia con el número de filas en el conjunto de datos para el que calculamos los pesos, para obtener frecuencias absolutas.</p>
<p>El nombre del vector que describe los niveles del factor, tiene que ser el mismo nombre que tiene la variable en la bbdd y la misma codificación del factor en la base de datos original.</p>
<p>Verificar que los nombres de la base en comuna, estén en el mismo orden que en la base <code>proy.18</code>.</p>
<p>Para el ejemplo: como no tienen el mismo orden de levels ordenaré BBDD$REGION EN BASE A LO QUE APARECE EN LAS PROYECCIONES</p>
<p><strong>¿Cómo se calcula?</strong></p>
<p>Para calcular estas distribuciones marginales debemos multiplicar el número total de casos de nuestra BBDD de estudio por la frecuencia relativa de las variables externas.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="construcción-de-ponderadores-por-raking.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="co"># REGION</span></span>
<span id="cb158-2"><a href="construcción-de-ponderadores-por-raking.html#cb158-2" aria-hidden="true" tabindex="-1"></a><span class="co"># dist. marginal</span></span>
<span id="cb158-3"><a href="construcción-de-ponderadores-por-raking.html#cb158-3" aria-hidden="true" tabindex="-1"></a>reg_dist <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">region =</span> <span class="fu">c</span>(<span class="fu">names</span>(<span class="fu">table</span>(data1<span class="sc">$</span>region))), </span>
<span id="cb158-4"><a href="construcción-de-ponderadores-por-raking.html#cb158-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Freq =</span> <span class="fu">nrow</span>(data1)<span class="sc">*</span><span class="fu">c</span>(proy<span class="fl">.18</span><span class="sc">$</span>porcentaje))</span>
<span id="cb158-5"><a href="construcción-de-ponderadores-por-raking.html#cb158-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-6"><a href="construcción-de-ponderadores-por-raking.html#cb158-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-7"><a href="construcción-de-ponderadores-por-raking.html#cb158-7" aria-hidden="true" tabindex="-1"></a><span class="co"># SEXO_EDAD</span></span>
<span id="cb158-8"><a href="construcción-de-ponderadores-por-raking.html#cb158-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ordenar variables</span></span>
<span id="cb158-9"><a href="construcción-de-ponderadores-por-raking.html#cb158-9" aria-hidden="true" tabindex="-1"></a>proy.<span class="fl">18.</span>se<span class="ot">&lt;-</span>proy.<span class="fl">18.</span>se[<span class="fu">order</span>(proy.<span class="fl">18.</span>se<span class="sc">$</span>edad_sexo),] </span>
<span id="cb158-10"><a href="construcción-de-ponderadores-por-raking.html#cb158-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-11"><a href="construcción-de-ponderadores-por-raking.html#cb158-11" aria-hidden="true" tabindex="-1"></a><span class="co"># dist. marginal</span></span>
<span id="cb158-12"><a href="construcción-de-ponderadores-por-raking.html#cb158-12" aria-hidden="true" tabindex="-1"></a>gender_edad_dist <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">edad_sexo =</span> <span class="fu">c</span>(<span class="fu">names</span>(<span class="fu">table</span>(proy.<span class="fl">18.</span>se<span class="sc">$</span>edad_sexo))), </span>
<span id="cb158-13"><a href="construcción-de-ponderadores-por-raking.html#cb158-13" aria-hidden="true" tabindex="-1"></a>                           <span class="at">Freq =</span> <span class="fu">nrow</span>(data1)<span class="sc">*</span><span class="fu">c</span>(proy.<span class="fl">18.</span>se<span class="sc">$</span>porcentaje))</span>
<span id="cb158-14"><a href="construcción-de-ponderadores-por-raking.html#cb158-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-15"><a href="construcción-de-ponderadores-por-raking.html#cb158-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-16"><a href="construcción-de-ponderadores-por-raking.html#cb158-16" aria-hidden="true" tabindex="-1"></a><span class="co"># EDUCACION</span></span>
<span id="cb158-17"><a href="construcción-de-ponderadores-por-raking.html#cb158-17" aria-hidden="true" tabindex="-1"></a><span class="co"># ordenar variables</span></span>
<span id="cb158-18"><a href="construcción-de-ponderadores-por-raking.html#cb158-18" aria-hidden="true" tabindex="-1"></a>data1<span class="ot">&lt;-</span>data1[<span class="fu">order</span>(data1<span class="sc">$</span>educ_rec),] </span>
<span id="cb158-19"><a href="construcción-de-ponderadores-por-raking.html#cb158-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-20"><a href="construcción-de-ponderadores-por-raking.html#cb158-20" aria-hidden="true" tabindex="-1"></a><span class="co"># dist. marginal</span></span>
<span id="cb158-21"><a href="construcción-de-ponderadores-por-raking.html#cb158-21" aria-hidden="true" tabindex="-1"></a>nivel_educ_dist<span class="ot">&lt;-</span><span class="fu">tibble</span>(<span class="at">educ_rec =</span> <span class="fu">c</span>(<span class="fu">names</span>(<span class="fu">table</span>(educacion.n<span class="sc">$</span>educ))), </span>
<span id="cb158-22"><a href="construcción-de-ponderadores-por-raking.html#cb158-22" aria-hidden="true" tabindex="-1"></a>                        <span class="at">Freq =</span> <span class="fu">nrow</span>(data1)<span class="sc">*</span><span class="fu">c</span>(educacion.n<span class="sc">$</span>prop))</span></code></pre></div>
</div>
<div id="cáluclo-del-ponderador" class="section level3 hasAnchor" number="6.4.3">
<h3><span class="header-section-number">6.4.3</span> <em>Cáluclo del ponderador</em><a href="construcción-de-ponderadores-por-raking.html#cáluclo-del-ponderador" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="construcción-de-ponderadores-por-raking.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CALCULO DE PONDERACIONES</span></span>
<span id="cb159-2"><a href="construcción-de-ponderadores-por-raking.html#cb159-2" aria-hidden="true" tabindex="-1"></a>dummy_gender_rake <span class="ot">&lt;-</span> </span>
<span id="cb159-3"><a href="construcción-de-ponderadores-por-raking.html#cb159-3" aria-hidden="true" tabindex="-1"></a>  survey<span class="sc">::</span><span class="fu">rake</span>(<span class="at">design =</span> dummy_survey_unweighted,         <span class="co"># objeto sin pesos</span></span>
<span id="cb159-4"><a href="construcción-de-ponderadores-por-raking.html#cb159-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">sample.margins =</span> <span class="fu">list</span>(<span class="sc">~</span>edad_sexo,         <span class="co"># variables a extraer</span></span>
<span id="cb159-5"><a href="construcción-de-ponderadores-por-raking.html#cb159-5" aria-hidden="true" tabindex="-1"></a>                                     <span class="sc">~</span>region,</span>
<span id="cb159-6"><a href="construcción-de-ponderadores-por-raking.html#cb159-6" aria-hidden="true" tabindex="-1"></a>                                     <span class="sc">~</span>educ_rec),</span>
<span id="cb159-7"><a href="construcción-de-ponderadores-por-raking.html#cb159-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">population.margins =</span> <span class="fu">list</span>(gender_edad_dist, <span class="co"># objetos de donde </span></span>
<span id="cb159-8"><a href="construcción-de-ponderadores-por-raking.html#cb159-8" aria-hidden="true" tabindex="-1"></a>                                         reg_dist,         <span class="co"># se extraen las</span></span>
<span id="cb159-9"><a href="construcción-de-ponderadores-por-raking.html#cb159-9" aria-hidden="true" tabindex="-1"></a>                                         nivel_educ_dist)) <span class="co"># variables</span></span>
<span id="cb159-10"><a href="construcción-de-ponderadores-por-raking.html#cb159-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-11"><a href="construcción-de-ponderadores-por-raking.html#cb159-11" aria-hidden="true" tabindex="-1"></a><span class="do">### ¡OJO, deben tener le mismo orden!</span></span>
<span id="cb159-12"><a href="construcción-de-ponderadores-por-raking.html#cb159-12" aria-hidden="true" tabindex="-1"></a><span class="co"># si quiero las variables edad_sexo, region y educ_rec, debo asegurarme que </span></span>
<span id="cb159-13"><a href="construcción-de-ponderadores-por-raking.html#cb159-13" aria-hidden="true" tabindex="-1"></a><span class="co"># el orden de los objetos debe seguir la misma logica, de esta manera R </span></span>
<span id="cb159-14"><a href="construcción-de-ponderadores-por-raking.html#cb159-14" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;sabra donde buscar&quot; para encontrar tales variables</span></span>
<span id="cb159-15"><a href="construcción-de-ponderadores-por-raking.html#cb159-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-16"><a href="construcción-de-ponderadores-por-raking.html#cb159-16" aria-hidden="true" tabindex="-1"></a><span class="do">## Comprobamos que los ponderadores esten bien construidos</span></span>
<span id="cb159-17"><a href="construcción-de-ponderadores-por-raking.html#cb159-17" aria-hidden="true" tabindex="-1"></a><span class="co"># como convención, los valores deben ser mayores a 0.3 (Min) y menores a 3 (Max)</span></span>
<span id="cb159-18"><a href="construcción-de-ponderadores-por-raking.html#cb159-18" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">weights</span>(dummy_gender_rake))</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 
##  0.2457  0.5346  0.8631  1.0000 
## 3rd Qu.    Max. 
##  1.4661  2.2611</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="construcción-de-ponderadores-por-raking.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="do">## En caso que no oscilen entre estos valores tenemos dos opciones:</span></span>
<span id="cb161-2"><a href="construcción-de-ponderadores-por-raking.html#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) volver a los pasos anteriores y recodificar de tal manera que los pesos</span></span>
<span id="cb161-3"><a href="construcción-de-ponderadores-por-raking.html#cb161-3" aria-hidden="true" tabindex="-1"></a><span class="co">#    tomen el rango deseado (recomendado).</span></span>
<span id="cb161-4"><a href="construcción-de-ponderadores-por-raking.html#cb161-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-5"><a href="construcción-de-ponderadores-por-raking.html#cb161-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) utilizar el siguiente codigo, el cual fuerza un recorte de los ponderadores</span></span>
<span id="cb161-6"><a href="construcción-de-ponderadores-por-raking.html#cb161-6" aria-hidden="true" tabindex="-1"></a><span class="co">#    de acuerdo al rango que le asignemos.</span></span>
<span id="cb161-7"><a href="construcción-de-ponderadores-por-raking.html#cb161-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-8"><a href="construcción-de-ponderadores-por-raking.html#cb161-8" aria-hidden="true" tabindex="-1"></a><span class="co"># dummy_gender_rake.rake.trim &lt;-        # nuevo objeto con ponderadores forzados</span></span>
<span id="cb161-9"><a href="construcción-de-ponderadores-por-raking.html#cb161-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   trimWeights(dummy_gender_rake,      # objeto con ponderadores</span></span>
<span id="cb161-10"><a href="construcción-de-ponderadores-por-raking.html#cb161-10" aria-hidden="true" tabindex="-1"></a><span class="co">#               lower=0.3,              # rango: minimo</span></span>
<span id="cb161-11"><a href="construcción-de-ponderadores-por-raking.html#cb161-11" aria-hidden="true" tabindex="-1"></a><span class="co">#               upper=3,                # rango: maximo</span></span>
<span id="cb161-12"><a href="construcción-de-ponderadores-por-raking.html#cb161-12" aria-hidden="true" tabindex="-1"></a><span class="co">#               strict=TRUE)            # forzar la funcion</span></span>
<span id="cb161-13"><a href="construcción-de-ponderadores-por-raking.html#cb161-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-14"><a href="construcción-de-ponderadores-por-raking.html#cb161-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-15"><a href="construcción-de-ponderadores-por-raking.html#cb161-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-16"><a href="construcción-de-ponderadores-por-raking.html#cb161-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Pasar los pesos a la bbdd original</span></span>
<span id="cb161-17"><a href="construcción-de-ponderadores-por-raking.html#cb161-17" aria-hidden="true" tabindex="-1"></a>data1<span class="sc">$</span>Pond<span class="ot">&lt;-</span><span class="fu">weights</span>(dummy_gender_rake)</span>
<span id="cb161-18"><a href="construcción-de-ponderadores-por-raking.html#cb161-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-19"><a href="construcción-de-ponderadores-por-raking.html#cb161-19" aria-hidden="true" tabindex="-1"></a><span class="co"># asegurarse que la suma de los puntajes de los ponderadores sean igual al</span></span>
<span id="cb161-20"><a href="construcción-de-ponderadores-por-raking.html#cb161-20" aria-hidden="true" tabindex="-1"></a><span class="co"># n muestral</span></span>
<span id="cb161-21"><a href="construcción-de-ponderadores-por-raking.html#cb161-21" aria-hidden="true" tabindex="-1"></a>data1<span class="sc">$</span>Pond <span class="sc">%&gt;%</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 1000</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="malla-de-validación.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introducción-a-rmarkdown-y-creación-de-reportes-automáticos.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Jona-S99/Bookdown/edit/master/06-Pond_ranking.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/Jona-S99/Bookdown/blob/master/06-Pond_ranking.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
